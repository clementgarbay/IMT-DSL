# Test 1
openBrowser "firefox"
go "http://www.imt-atlantique.fr/fr"
assign link[text="Toutes les actualités"] theLink
assert body[].html contains theLink

# Test 2
openBrowser "firefox"
go "http://www.imt-atlantique.fr/fr"
click link[text="Toutes les actualités"]
assign link[text="Accueil"] theLink
assert body[].html contains theLink

# Test 3
openBrowser "firefox"
go "http://www.imt-atlantique.fr/fr"
assign link[text="Toutes les actualités"] theLink
click theLink
click img[alt="Accueil"]
assert body[].html contains theLink

# Test 4
openBrowser "firefox"
go "http://www.imt-atlantique.fr/fr/rechercher"
fill input[type="text"] "Donald Trump"
click button[text="Appliquer les filtres"]
assert body[].html contains "Aucun résultat ne correspond à votre recherche"

# Test 5
openBrowser "firefox"
go "http://www.imt-atlantique.fr/fr/formation/trouver-ma-formation"
click checkbox[checked="true"].all
click checkbox[text="Anglais"]
click checkbox[text="A domicile"]
click button[text="Appliquer les critères"]
assert body[].html contains "Aucune formation trouvée répondant à vos critères"

# Test 6
openBrowser "firefox"
go "http://www.imt-atlantique.fr/fr/rechercher"
fill input[type="text"] "2007"
choose select[] [text="Le mois dernier"]
click button[text="Appliquer les filtres"]
assert body[].html contains "Aucun résultat ne correspond à votre recherche"

# Test 7
# TODO

# Test 8
def countResults() {
  div[class="views-row"].all.count
}
def main {
  openBrowser "firefox"
  go "http://www.imt-atlantique.fr/fr/rechercher"
  fill input[type="text"] "2007"
  click button[text="Appliquer les filtres"]
  assign countResults() nbResults
  choose select[] [text="Le mois dernier"]
  click button[text="Appliquer les filtres"]
  assert nbResults = countResults()
}

# Test 9
def checkPrintable(name) {
  go "http://www.imt-atlantique.fr/fr"
  click a[text=name]
  assign img[alt="Imprimer"] imageImprimer
  assert body[].html contains imageImprimer
  click imageImprimer
}
def main {
  openBrowser "firefox"
  checkPrintable("COMMUNIQUÉS DE PRESSE")
  checkPrintable("DOSSIERS DE PRESSE")
  checkPrintable("VISUELS POUR LA PRESSE")
  checkPrintable("LA PRESSE EN PARLE")
  checkPrintable("TRIBUNES DE PRESSE")
  checkPrintable("LES PALMARÈS")
}


